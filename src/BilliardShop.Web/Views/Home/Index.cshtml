@model BilliardShop.Web.Models.HomeViewModel
@{
    ViewData["Title"] = "Billiard Shop - Trang chủ";
    ViewData["BodyId"] = "homepage";
    ViewData["Template"] = "index";
}

@section Styles {
    <link rel="stylesheet" href="~/section-image-banner.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/collection-slider.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/product-grid.css" asp-append-version="true" />

    <style>
        .hero-banner {
            position: relative;
            height: 600px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
            margin-bottom: 60px;
            overflow: hidden;
        }
        .hero-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.1" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,165.3C1248,171,1344,149,1392,138.7L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') bottom center no-repeat;
            background-size: cover;
        }
        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 800px;
            padding: 0 20px;
        }
        .hero-content h1 {
            font-size: 56px;
            font-weight: 700;
            margin-bottom: 20px;
            animation: fadeInUp 1s ease;
        }
        .hero-content p {
            font-size: 20px;
            margin-bottom: 30px;
            animation: fadeInUp 1s ease 0.2s both;
        }
        .hero-btn {
            display: inline-block;
            padding: 15px 40px;
            background: #e74c3c;
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s;
            animation: fadeInUp 1s ease 0.4s both;
        }
        .hero-btn:hover {
            background: #c0392b;
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        @@keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-header {
            text-align: center;
            margin-bottom: 50px;
        }
        .section-header h2 {
            font-size: 36px;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .section-header p {
            color: #7f8c8d;
            font-size: 16px;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 80px;
        }
        .category-card {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
            background: white;
        }
        .category-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        .category-card-image {
            height: 200px;
            overflow: hidden;
        }
        .category-card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }
        .category-card:hover .category-card-image img {
            transform: scale(1.1);
        }
        .category-card-content {
            padding: 20px;
            text-align: center;
        }
        .category-card-content h3 {
            font-size: 20px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .category-card-content p {
            color: #7f8c8d;
            font-size: 14px;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }
        .product-card-wrapper {
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            background: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: all 0.3s;
        }
        .product-card-wrapper:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        .product-card-image {
            position: relative;
            height: 300px;
            overflow: hidden;
        }
        .product-card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }
        .product-card-wrapper:hover .product-card-image img {
            transform: scale(1.05);
        }
        .product-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #e74c3c;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        .product-card-content {
            padding: 20px;
        }
        .product-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
            text-decoration: none;
            display: block;
        }
        .product-title:hover {
            color: #e74c3c;
        }
        .product-description {
            color: #7f8c8d;
            font-size: 14px;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        .product-price {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        .price-sale {
            font-size: 22px;
            font-weight: 700;
            color: #e74c3c;
        }
        .price-regular {
            font-size: 16px;
            color: #95a5a6;
            text-decoration: line-through;
        }
        .btn-add-to-cart {
            width: 100%;
            padding: 12px;
            background: #2c3e50;
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-add-to-cart:hover {
            background: #34495e;
        }
        .out-of-stock {
            background: #95a5a6;
            cursor: not-allowed;
        }
    </style>
}

@* Hero Banner *@
<section class="hero-banner wow fadeIn">
    <div class="hero-content">
        <h1 class="animate__animated animate__fadeInUp">Chào mừng đến Billiard Shop</h1>
        <p class="animate__animated animate__fadeInUp">Thiết bị bida chuyên nghiệp - Chất lượng cao</p>
        <a href="@Url.Action("Index", "Product")" class="hero-btn animate__animated animate__fadeInUp">
            Khám phá ngay
        </a>
    </div>
</section>

<div class="page-width">
    @* Categories Section *@
    <section class="categories-section wow fadeInUp">
        <div class="section-header">
            <h2>Danh mục sản phẩm</h2>
            <p>Khám phá các danh mục sản phẩm bida đa dạng của chúng tôi</p>
        </div>
        <div class="category-grid">
            @foreach (var category in Model.Categories)
            {
                <a href="@Url.Action("Index", "Product", new { categorySlug = category.DuongDanDanhMuc })"
                   class="category-card" style="text-decoration: none;">
                    <div class="category-card-image">
                        @if (!string.IsNullOrEmpty(category.HinhAnhDaiDien))
                        {
                            <img src="@category.HinhAnhDaiDien" alt="@category.TenDanhMuc">
                        }
                        else
                        {
                            <img src="~/collection-placeholder.svg" alt="@category.TenDanhMuc">
                        }
                    </div>
                    <div class="category-card-content">
                        <h3>@category.TenDanhMuc</h3>
                        @if (!string.IsNullOrEmpty(category.MoTa))
                        {
                            <p>@category.MoTa</p>
                        }
                    </div>
                </a>
            }
        </div>
    </section>

    @* Featured Products Section *@
    <section class="featured-products-section wow fadeInUp">
        <div class="section-header">
            <h2>Sản phẩm nổi bật</h2>
            <p>Những sản phẩm bán chạy nhất tại cửa hàng</p>
        </div>
        <div class="product-grid">
            @foreach (var product in Model.FeaturedProducts)
            {
                <div class="product-card-wrapper">
                    @if (product.GiaKhuyenMai.HasValue)
                    {
                        var discount = (int)((product.GiaGoc - product.GiaKhuyenMai.Value) / product.GiaGoc * 100);
                        <span class="product-badge">-@discount%</span>
                    }

                    <a href="@Url.Action("Details", "Product", new { slug = product.DuongDanSanPham })">
                        <div class="product-card-image">
                            @if (product.HinhAnhs.Any())
                            {
                                <img src="@product.HinhAnhs.First().DuongDanHinhAnh" alt="@product.TenSanPham">
                            }
                            else
                            {
                                <img src="~/product-placeholder.svg" alt="@product.TenSanPham">
                            }
                        </div>
                    </a>

                    <div class="product-card-content">
                        <a href="@Url.Action("Details", "Product", new { slug = product.DuongDanSanPham })"
                           class="product-title">
                            @product.TenSanPham
                        </a>

                        @if (!string.IsNullOrEmpty(product.MoTaNgan))
                        {
                            <p class="product-description">
                                @(product.MoTaNgan.Length > 80 ? product.MoTaNgan.Substring(0, 80) + "..." : product.MoTaNgan)
                            </p>
                        }

                        <div class="product-price">
                            @if (product.GiaKhuyenMai.HasValue)
                            {
                                <span class="price-sale">@product.GiaKhuyenMai.Value.ToString("N0") ₫</span>
                                <span class="price-regular">@product.GiaGoc.ToString("N0") ₫</span>
                            }
                            else
                            {
                                <span class="price-sale">@product.GiaGoc.ToString("N0") ₫</span>
                            }
                        </div>

                        @if (product.SoLuongTonKho > 0)
                        {
                            <button class="btn-add-to-cart" onclick="addToCart(@product.SanPhamId)">
                                <i class="fa fa-shopping-cart"></i> Thêm vào giỏ
                            </button>
                        }
                        else
                        {
                            <button class="btn-add-to-cart out-of-stock" disabled>
                                Hết hàng
                            </button>
                        }
                    </div>
                </div>
            }
        </div>
    </section>
</div>

@section Scripts {
    <script>
        function addToCart(productId) {
            // This will be implemented with actual cart functionality
            console.log('Adding product to cart:', productId);
            alert('Sản phẩm đã được thêm vào giỏ hàng!');
        }
    </script>
}
